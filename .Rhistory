labs(title = "Matriz de Correlación de Variables Numéricas")
library(reshape2)
melted_corr <- melt(corr_matrix)
ggplot(data = melted_corr, aes(x = Var1, y = Var2, fill = value)) +
geom_tile() +
scale_fill_gradient2(low = "blue", high = "red", mid = "white",
limit = c(-1, 1), name = "Correlación") +
theme_minimal() +
theme(
axis.text.x = element_text(angle=270, vjust=1, hjust=1)
) +
coord_fixed() +
labs(title = "Matriz de Correlación de Variables Numéricas")
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(-tipo_variable, -porcentaje_nulos)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(tipo_variable, -porcentaje_nulos)
print(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), -porcentaje_nulos)
print(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), dec(porcentaje_nulos))
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
print(nulos_tab)
# ahora mostrar solo los pares con alta correlación (>0.7 o <-0.7)
high_corr <- which(abs(corr_matrix) > 0.7 & abs(corr_matrix) < 1, arr.ind = TRUE)
high_corr_pairs <- data.frame(
Var1 = rownames(corr_matrix)[high_corr[, 1]],
Var2 = colnames(corr_matrix)[high_corr[, 2]],
Correlation = corr_matrix[high_corr]
)
high_corr_pairs <- high_corr_pairs %>%
# eliminar duplicados (Var1, Var2) y (Var2, Var1)
filter(Var1 < Var2) %>%
arrange(-abs(Correlation))
high_corr_pairs
library(reshape2)
melted_corr <- melt(corr_matrix)
ggplot(data = melted_corr, aes(x = Var1, y = Var2, fill = value)) +
geom_tile() +
scale_fill_gradient2(low = "blue", high = "red", mid = "white",
limit = c(-1, 1), name = "Correlación") +
theme_minimal() +
theme(
axis.text.x = element_text(angle=270, vjust=1, hjust=1)
) +
coord_fixed() +
labs(title = "Matriz de Correlación de Variables Numéricas")
# ahora mostrar solo los pares con alta correlación (>0.7 o <-0.7)
high_corr <- which(abs(corr_matrix) > 0.7 & abs(corr_matrix) < 1, arr.ind = TRUE)
high_corr_pairs <- data.frame(
Var1 = rownames(corr_matrix)[high_corr[, 1]],
Var2 = colnames(corr_matrix)[high_corr[, 2]],
Correlation = corr_matrix[high_corr]
)
high_corr_pairs <- high_corr_pairs %>%
# eliminar duplicados (Var1, Var2) y (Var2, Var1)
filter(Var1 < Var2) %>%
# añadir columna con el tipo de var1 y otra con el tipo de var2
mutate(
Tipo_Var1 = sapply(Var1, function(v) class(df_2[[v]])),
Tipo_Var2 = sapply(Var2, function(v) class(df_2[[v]]))
)
arrange(-abs(Correlation))
# ahora mostrar solo los pares con alta correlación (>0.7 o <-0.7)
high_corr <- which(abs(corr_matrix) > 0.7 & abs(corr_matrix) < 1, arr.ind = TRUE)
high_corr_pairs <- data.frame(
Var1 = rownames(corr_matrix)[high_corr[, 1]],
Var2 = colnames(corr_matrix)[high_corr[, 2]],
Correlation = corr_matrix[high_corr]
)
high_corr_pairs <- high_corr_pairs %>%
# eliminar duplicados (Var1, Var2) y (Var2, Var1)
filter(Var1 < Var2) %>%
# añadir columna con el tipo de var1 y otra con el tipo de var2
mutate(
Tipo_Var1 = sapply(Var1, function(v) class(df_2[[v]])),
Tipo_Var2 = sapply(Var2, function(v) class(df_2[[v]]))
)
# arrange(-abs(Correlation))
high_corr_pairs
# ahora mostrar solo los pares con alta correlación (>0.7 o <-0.7)
high_corr <- which(abs(corr_matrix) > 0.7 & abs(corr_matrix) < 1, arr.ind = TRUE)
high_corr_pairs <- data.frame(
Var1 = rownames(corr_matrix)[high_corr[, 1]],
Var2 = colnames(corr_matrix)[high_corr[, 2]],
Correlation = corr_matrix[high_corr]
)
high_corr_pairs <- high_corr_pairs %>%
# eliminar duplicados (Var1, Var2) y (Var2, Var1)
filter(Var1 < Var2) %>%
# añadir columna con el tipo de var1 y otra con el tipo de var2
mutate(
Tipo_Var1 = sapply(Var1, function(v) class(df_2[[v]])),
Tipo_Var2 = sapply(Var2, function(v) class(df_2[[v]]))
) %>%
arrange(-abs(Correlation))
high_corr_pairs
cat("Número de NULL:", sum(sapply(df_2, is.null)))
cat("Número de vacíos:", sum(sapply(df_2, function(x) sum(x == "" | x == " " , na.rm = TRUE))))
cat("Número de NULL:", sum(sapply(df_2, is.null)))
cat("Número de vacíos:", sum(sapply(df_2, function(x) sum(x == "" | x == " " , na.rm = TRUE))))
cat("Número de NULL:", sum(sapply(df_2, is.null)))
cat("\nNúmero de vacíos:", sum(sapply(df_2, function(x) sum(x == "" | x == " " , na.rm = TRUE))))
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
print(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
rmarkdown::paged_table(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
knitr::kable(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
options(max.print = 20)
print(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
options(max.print = 50)
print(nulos_tab)
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
DT::datatable(nulos_tab, options = list(scrollX = TRUE, scrollY = "600px"))
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
print(nulos_tab)
# para estas variables categóricas, sustituimos los NA por "No"
vars_cat_na_no <- c("Alley", "FireplaceQu", "PoolQC", "Fence", "MiscFeature",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"GarageType", "GarageFinish", "GarageQual", "GarageCond")
df_2 <- df_2 %>%
mutate(across(all_of(vars_cat_na_no), ~replace_na(.x, "No")))
# comprobamos que ya no hay NAs en esas variables
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
df_2 <- df_1  # copiar dataset para preprocesamiento
cat("Número de NULL:", sum(sapply(df_2, is.null)))
cat("\nNúmero de vacíos:", sum(sapply(df_2, function(x) sum(x == "" | x == " " , na.rm = TRUE))))
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
print(nulos_tab)
vars_cat_na_no <- c("Alley", "FireplaceQu", "PoolQC", "Fence", "MiscFeature",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"GarageType", "GarageFinish", "GarageQual", "GarageCond")
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
# para estas variables sustituimos los NA por "No"
df_2 <- df_2 %>%
mutate(across(all_of(vars_cat_na_no), ~replace_na(.x, "No")))
# comprobamos que ya no hay NAs en esas variables
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
vars_num_na <- c("LotFrontage", "MasVnrArea", "GarageYrBlt")
sapply(df_2[ , vars_num_na], function(x) c(media = mean(x, na.rm = TRUE),
mediana = median(x, na.rm = TRUE)))
vars_num_na <- c("LotFrontage", "MasVnrArea", "GarageYrBlt")
summary(df_2[ , vars_num_na])
# Imputación simple en LotFrontage: mediana
df_2$LotFrontage_na <- is.na(df_2$LotFrontage)
med <- median(df_2$LotFrontage, na.rm = TRUE)
df_2$LotFrontage[is.na(df_2$LotFrontage)] <- med
# comprobamos que ya no hay NAs en LotFrontage
sum(is.na(df_2$LotFrontage))
df_2 <- df_1  # copiar dataset para preprocesamiento
cat("Número de NULL:", sum(sapply(df_2, is.null)))
cat("\nNúmero de vacíos:", sum(sapply(df_2, function(x) sum(x == "" | x == " " , na.rm = TRUE))))
# crear dataframe de nulos
nulos_tab <- as.data.frame(colSums(is.na(df_2)))
colnames(nulos_tab) <- c("num_nulos")
nulos_tab <- nulos_tab %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(df_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(df_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
print(nulos_tab)
vars_cat_na_no <- c("Alley", "FireplaceQu", "PoolQC", "Fence", "MiscFeature",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"GarageType", "GarageFinish", "GarageQual", "GarageCond")
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
vars_cat_na_no <- c("Alley", "FireplaceQu", "PoolQC", "Fence", "MiscFeature",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"GarageType", "GarageFinish", "GarageQual", "GarageCond")
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
# para estas variables sustituimos los NA por "No"
df_2 <- df_2 %>%
mutate(across(all_of(vars_cat_na_no), ~replace_na(.x, "No")))
# comprobamos que ya no hay NAs en esas variables
sapply(df_2[ , vars_cat_na_no], function(x) sum(is.na(x)))
vars_num_na <- c("LotFrontage", "MasVnrArea", "GarageYrBlt")
summary(df_2[ , vars_num_na])
# primero creamos la variable indicadora de NA
df_2$LotFrontage_na <- is.na(df_2$LotFrontage)
# luego calculamos la mediana
med <- median(df_2$LotFrontage, na.rm = TRUE)
# finalmente imputamos los NAs con la mediana
df_2$LotFrontage[is.na(df_2$LotFrontage)] <- med
# comprobamos que ya no hay NAs en LotFrontage
sum(is.na(df_2$LotFrontage))
# y eliminamos la variable indicadora por limpieza
df_2 <- df_2 %>%
select(-LotFrontage_na)
vars_num_corr <- vars_num %>%
select(-SalePrice)  # eliminar variable objetivo para este análisis
corr_matrix <- cor(vars_num_corr, use = "pairwise.complete.obs")
# print(round(corr_matrix, 2))
melted_corr <- melt(corr_matrix)
ggplot(data = melted_corr, aes(x = Var1, y = Var2, fill = value)) +
geom_tile() +
scale_fill_gradient2(low = "blue", high = "red", mid = "white",
limit = c(-1, 1), name = "Correlación") +
theme_minimal() +
theme(
axis.text.x = element_text(angle=270, vjust=1, hjust=1)
) +
coord_fixed() +
labs(title = "Matriz de Correlación de Variables Numéricas")
# ahora mostrar solo los pares con alta correlación (>0.7 o <-0.7)
high_corr <- which(abs(corr_matrix) > 0.7 & abs(corr_matrix) < 1, arr.ind = TRUE)
high_corr_pairs <- data.frame(
Var1 = rownames(corr_matrix)[high_corr[, 1]],
Var2 = colnames(corr_matrix)[high_corr[, 2]],
Correlation = corr_matrix[high_corr]
)
high_corr_pairs <- high_corr_pairs %>%
# eliminar duplicados (Var1, Var2) y (Var2, Var1)
filter(Var1 < Var2) %>%
# añadir columna con el tipo de var1 y otra con el tipo de var2
mutate(
Tipo_Var1 = sapply(Var1, function(v) class(df_2[[v]])),
Tipo_Var2 = sapply(Var2, function(v) class(df_2[[v]]))
) %>%
arrange(-abs(Correlation))
high_corr_pairs
df_2$MasVnrArea[is.na(df_2$MasVnrArea)] <- 0
# comprobamos que ya no hay NAs en MasVnrArea
sum(is.na(df_2$MasVnrArea))
# install.packages("readxl")
# install.packages("caret")
# install.packages("stats")
# install.packages("ggplot2")
library(readxl)   # para leer archivos Excel
library(stats)    # para PCA y regresión lineal
library(caret)    # para crear particiones estratificadas
library(tidyverse)  # para manipulación y visualización de datos
library(dplyr)      # para manipulación de datos
library(ggplot2)    # para visualización de datos
library(reshape2)   # para la matriz de correlación
# Directorio de trabajo
setwd("C:/Users/velir/OneDrive - Universidad Alfonso X el Sabio/1. UAX UNIVERSIDAD/2. MASTER Inteligencia Artificial/01_Cuatri_MUIA/MUIA_1c Matematicas y Estadistica para la IA/ENTREGA_01")
# Cargamos el dataset
df <- read.csv("dataset.csv")
cat("Dimensiones del dataset:\n", nrow(df), "filas\n", ncol(df), "columnas\n\n")
# copia del dataset original
df1 <- df
# eliminar columna Id ya que no es una variable que aporte información
df1 <- df1 %>%
select(-Id)
# ver estructura general del datase (variables, tipos de datos, primeros registros)
glimpse(df1)
# ver cuántos tipos de variables hay
type_tab <- as.data.frame(table(vapply(df1, typeof, character(1))))
colnames(type_tab) <- c("tipo_dato", "num_var_predict")
type_tab[order(-type_tab$num_var_predict), ]
summary(df)
# variables numéricas <int> : media, mediana, min, max, cuartiles
# variables categóricas <chr>: frecuencia de cada categoría
df2 <- df1  # (en df1 se eliminó la variable Id)
# Primero hay que separar variable objetivo y predictoras
# variable objetivo
y <- df2$SalePrice
# variables predictoras
X <- df2 %>%
select(-SalePrice)  # eliminar columna objetivo
# Establecemos la semilla para reproducibilidad
set.seed(42)
# Separamos 60% para entrenamiento
trainIndex <- createDataPartition(y, p = 0.6, list = FALSE)
# createDataPartition mantiene la distribución de la variable objetivo
X_train <- X[trainIndex, ]
y_train <- y[trainIndex]
# Del 40% restante, dividimos en 50%-50% (validación y test)
remainingIndex <- setdiff(seq_len(nrow(df2)), trainIndex)
valIndex <- createDataPartition(y[remainingIndex], p = 0.5, list = FALSE)
X_val <- X[remainingIndex[valIndex], ]
y_val <- y[remainingIndex[valIndex]]
X_test <- X[remainingIndex[-valIndex], ]
y_test <- y[remainingIndex[-valIndex]]
cat("Tamaños de conjuntos:\n")
cat("  - Entrenamiento:", nrow(X_train), "observaciones\n")
cat("  - Validación:", nrow(X_val), "observaciones\n")
cat("  - Test:", nrow(X_test), "observaciones\n\n")
# naming convention: añadir _n correspondiente a la sección del proceso en la que se encuentra (sección 2 Preprocesamiento --> _2)
X_train_2 <- X_train
X_val_2 <- X_val
X_test_2 <- X_test
# comprobemos que no hay datos duplicados
sum(duplicated(X_train_2))  # debería dar 0
# comprobemos que no hay datos duplicados
cat( "Número de entradas duplicadas:", sum(duplicated(X_train_2)) )
cat( "Número de NULL:", sum(sapply(X_train_2, is.null)) )
cat("\nNúmero de vacíos:",sum(sapply(X_train_2, function(x) sum(x == "" | x == " " , na.rm = TRUE)))  )
cat( "Número de entradas duplicadas:", sum(duplicated(X_train_2)) )
cat( "Número de NULL:", sum(sapply(X_train_2, is.null)) )
cat("\nNúmero de vacíos:",sum(sapply(X_train_2, function(x) sum(x == "" | x == " " , na.rm = TRUE)))  )
# crear dataframe de nulos por variable
nulos_X_train <- as.data.frame(colSums(is.na(X_train_2)))
colnames(nulos_X_train) <- c("num_nulos")
nulos_X_train <- nulos_X_train %>%
# seleccionar las variables que tienen nulos
filter(num_nulos > 0) %>%
# convertir los nombres de las filas en una columna
tibble::rownames_to_column(var = "variable") %>%
mutate(
# añadir columna del porcentaje de nulos
porcentaje_nulos = round((num_nulos / nrow(X_train_2)) * 100, 2),
# añadir columna del tipo de variable
tipo_variable = sapply(variable, function(v) class(X_train_2[[v]]))
) %>%
# ordenar de mayor a menor número de nulos
arrange(desc(tipo_variable), desc(porcentaje_nulos))
print(nulos_X_train)
